<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>pi4clj.gpio documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Pi4clj</span> <span class="project-version">0.0.0-alpha4</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>pi4clj</span></div></div></li><li class="depth-2 current"><a href="pi4clj.gpio.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>gpio</span></div></a></li><li class="depth-3"><a href="pi4clj.gpio.emulated.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>emulated</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="pi4clj.gpio.html#var-analog"><div class="inner"><span>analog</span></div></a></li><li class="depth-1"><a href="pi4clj.gpio.html#var-board-revision"><div class="inner"><span>board-revision</span></div></a></li><li class="depth-1"><a href="pi4clj.gpio.html#var-digital"><div class="inner"><span>digital</span></div></a></li><li class="depth-1"><a href="pi4clj.gpio.html#var-edge-detection"><div class="inner"><span>edge-detection</span></div></a></li><li class="depth-1"><a href="pi4clj.gpio.html#var-edge-handler"><div class="inner"><span>edge-handler</span></div></a></li><li class="depth-1"><a href="pi4clj.gpio.html#var-gpio-clock"><div class="inner"><span>gpio-clock</span></div></a></li><li class="depth-1"><a href="pi4clj.gpio.html#var-mode"><div class="inner"><span>mode</span></div></a></li><li class="depth-1"><a href="pi4clj.gpio.html#var-pull-resistance"><div class="inner"><span>pull-resistance</span></div></a></li><li class="depth-1"><a href="pi4clj.gpio.html#var-pwm"><div class="inner"><span>pwm</span></div></a></li><li class="depth-1"><a href="pi4clj.gpio.html#var-pwm-config"><div class="inner"><span>pwm-config</span></div></a></li><li class="depth-1"><a href="pi4clj.gpio.html#var-scheme"><div class="inner"><span>scheme</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">pi4clj.gpio</h1><div class="doc"><pre class="plaintext">Handles hardware GPIO.

&lt;!&gt; Prior to any I/O operation, a pin numbering scheme must be chosen.
    Cf. `scheme`</pre></div><div class="public anchor" id="var-analog"><h3>analog</h3><div class="usage"><code>(analog pin)</code><code>(analog pin value)</code></div><div class="doc"><pre class="plaintext">Reads or writes an analog pin.

WiringPi supports this if an extension is provided.

Modified versions of wiringPi for other boards might have direct support.

-----

For reading :

  @ pin
    Pin number.

  =&gt; Integer.

-----

For writing :

  @ pin
    Pin number

  @ value
    Integer.

  =&gt; `pin`</pre></div><div class="src-link"><a href="https://github.com/dvlopt/pi4clj/blob/0.0.0-alpha4/src/pi4clj/gpio.clj#L265">view source</a></div></div><div class="public anchor" id="var-board-revision"><h3>board-revision</h3><div class="usage"><code>(board-revision)</code></div><div class="doc"><pre class="plaintext">Gets the board revision number.
</pre></div><div class="src-link"><a href="https://github.com/dvlopt/pi4clj/blob/0.0.0-alpha4/src/pi4clj/gpio.clj#L524">view source</a></div></div><div class="public anchor" id="var-digital"><h3>digital</h3><div class="usage"><code>(digital pin)</code><code>(digital pin state)</code></div><div class="doc"><pre class="plaintext">Reads or writes a digital pin using booleans.

   True  represents a HIGH value.
   False represents a LOW  value.

-----

For reading :

  @ pin
    Pin number.

  =&gt; Boolean

-----

For writing :

  @ pin
    Pin number.

  @ state
    Boolean.

  =&gt; `pin`</pre></div><div class="src-link"><a href="https://github.com/dvlopt/pi4clj/blob/0.0.0-alpha4/src/pi4clj/gpio.clj#L308">view source</a></div></div><div class="public anchor" id="var-edge-detection"><h3>edge-detection</h3><div class="usage"><code>(edge-detection pin mode)</code></div><div class="doc"><pre class="plaintext">Sets edge detection, ie. monitoring a pin for state change.

In case of a high number of state changes happening very fast, the file system will not keep up,
meaning it will drop some (actually, most of them). For lower throughput, there should not be
any problem.

If genuine interrupts are needed for a high throughput, other solutions must be considered
such as using a microcontroller.

&lt;!&gt; Consumes 1 thread / pin.


@ pin
  Pin number.

@ mode
  One of :

    :none
     Disables monitoring, kills the associated thread is there is one.

    :rising
     Monitors only when to pin goes from low to high.

    :falling
     Monitors only when the pin goes from high to low.

    :both
     Monitors both.

=&gt; true
     If the operation succeeded.

   false
     If not, meaning setting edge detection failed.


Ex. (gpio/edge-detection 2
                         :rising)


Cf. `edge-handler`</pre></div><div class="src-link"><a href="https://github.com/dvlopt/pi4clj/blob/0.0.0-alpha4/src/pi4clj/gpio.clj#L402">view source</a></div></div><div class="public anchor" id="var-edge-handler"><h3>edge-handler</h3><div class="usage"><code>(edge-handler key ?handler)</code></div><div class="doc"><pre class="plaintext">Registers or removes an edge handler.

A handler reacts to anything resulting from `edge-detection`. Hence, it is easy
to write handler reacting to several pins.


@ key
  Key for the given handler.

@ ?handler
  One of :

    nil
      For removing the current handler.
 
    (fn [pin state])
      For registering a new one (and overwriting what already exists).
      In case of a high number of events happening very fast, the state might be wrong.
      Otherwise, the user should assume the state is correct.

=&gt; `key`


Ex. (edge-handler :button
                  (fn handler [pin value]
                    (when (and (= pin
                                  2))
                      ...)))</pre></div><div class="src-link"><a href="https://github.com/dvlopt/pi4clj/blob/0.0.0-alpha4/src/pi4clj/gpio.clj#L474">view source</a></div></div><div class="public anchor" id="var-gpio-clock"><h3>gpio-clock</h3><div class="usage"><code>(gpio-clock pin frequency)</code></div><div class="doc"><pre class="plaintext">Sets the frequency of the given gpio clock pin.

@ pin
  Pin number.

@ frequency
  In Hertz.

=&gt; `pin`</pre></div><div class="src-link"><a href="https://github.com/dvlopt/pi4clj/blob/0.0.0-alpha4/src/pi4clj/gpio.clj#L378">view source</a></div></div><div class="public anchor" id="var-mode"><h3>mode</h3><div class="usage"><code>(mode pin mode)</code></div><div class="doc"><pre class="plaintext">Sets the mode of a pin.

@ pin
  Pin number.

@ mode
  One of #{:input/digital
           :output/digital
           :output/pwm
           :outpuw/gpio-clock}

=&gt; pin</pre></div><div class="src-link"><a href="https://github.com/dvlopt/pi4clj/blob/0.0.0-alpha4/src/pi4clj/gpio.clj#L143">view source</a></div></div><div class="public anchor" id="var-pull-resistance"><h3>pull-resistance</h3><div class="usage"><code>(pull-resistance pin resistance)</code></div><div class="doc"><pre class="plaintext">Sets the pull-resistance of a digital input.

&lt;!&gt; Does not work in :sys numbering scheme.


@ pin
  Pin number.

@ resistance
  One of #{:off
           :down
           :up}

=&gt; `pin`</pre></div><div class="src-link"><a href="https://github.com/dvlopt/pi4clj/blob/0.0.0-alpha4/src/pi4clj/gpio.clj#L172">view source</a></div></div><div class="public anchor" id="var-pwm"><h3>pwm</h3><div class="usage"><code>(pwm pin value)</code></div><div class="doc"><pre class="plaintext">Writes a value to a PWM output.

The Raspberry Pi has a default range of 1024.


@ pin
  Pin number.

@ value
  Value considering the PWM range.

=&gt; `pin`


Cf. `pwm-config`</pre></div><div class="src-link"><a href="https://github.com/dvlopt/pi4clj/blob/0.0.0-alpha4/src/pi4clj/gpio.clj#L352">view source</a></div></div><div class="public anchor" id="var-pwm-config"><h3>pwm-config</h3><div class="usage"><code>(pwm-config {:as ?config, :keys [?mode ?clock-divisor ?range]})</code></div><div class="doc"><pre class="plaintext">Modifies how hardware pwm outputs behaves.

&lt;!&gt; Does not work in :sys numbering scheme.


@ ?config
  {:?mode
    Two pwm modes are available, modifying how the duty cycle is modeled.
    Ex. Let us say a duty cycle of 25% :

        :mark-space
        __      __
          ______  ______

        :balanced (default)
        _   _   _   _
         ___ ___ ___ ___


   :?clock-divisor
    PWM clock, base is 19.2MHz.

   :?range
    The pwm clock increments a counter at each pulse. When this counter hits
    the value given by the range (default is 1024), it resets to 0 and it is
    equivalent to a period. The range is therefore the number of pulses per
    period.}

=&gt; nil


duty cycle = range / value

In :balanced mode, the frequency varies with the duty cycle.

In :mark-space mode, a higher range results in a better resolution but a lower
frequency as such :

    frequency = 19.2MHz / clock-divisor / range</pre></div><div class="src-link"><a href="https://github.com/dvlopt/pi4clj/blob/0.0.0-alpha4/src/pi4clj/gpio.clj#L201">view source</a></div></div><div class="public anchor" id="var-scheme"><h3>scheme</h3><div class="usage"><code>(scheme)</code><code>(scheme scheme)</code></div><div class="doc"><pre class="plaintext">Starts GPIO activity by choosing a pin numbering scheme, must be called prior to doing IO.

Once a scheme is chosen, it cannot be changed. Calling this function again won't do anything.


@ scheme
  One of these numbering schemes :

    :wiring-pi
     WiringPi abstracted pin numbering, consistent across models and revisions (recommended and default).
     Must run as root.

    :broadom
     Broadcom pin numbering, might and will change across models and revisions.
     Must run as root.

    :sys
     Same as :broadcom but uses the file system instead of writing directly to '/dev/mem'.
     Hence, it is a lot slower and not every fn from this library work in this mode.
     Plus, pins have to be exported and prepared in advance.

=&gt; Applied scheme.</pre></div><div class="src-link"><a href="https://github.com/dvlopt/pi4clj/blob/0.0.0-alpha4/src/pi4clj/gpio.clj#L86">view source</a></div></div></div></body></html>