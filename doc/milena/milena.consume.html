<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>milena.consume documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Milena</span> <span class="project-version">0.0.0-alpha8</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>milena</span></div></div></li><li class="depth-2 branch"><a href="milena.admin.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>admin</span></div></a></li><li class="depth-2 branch current"><a href="milena.consume.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>consume</span></div></a></li><li class="depth-2 branch"><a href="milena.deserialize.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>deserialize</span></div></a></li><li class="depth-2"><a href="milena.interop.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>interop</span></div></a></li><li class="depth-3 branch"><a href="milena.interop.clj.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>clj</span></div></a></li><li class="depth-3"><a href="milena.interop.java.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>java</span></div></a></li><li class="depth-2 branch"><a href="milena.produce.html"><div class="inner"><span class="tree" style="top: -83px;"><span class="top" style="height: 92px;"></span><span class="bottom"></span></span><span>produce</span></div></a></li><li class="depth-2"><a href="milena.serialize.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>serialize</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="milena.consume.html#var-close"><div class="inner"><span>close</span></div></a></li><li class="depth-1"><a href="milena.consume.html#var-commit-async"><div class="inner"><span>commit-async</span></div></a></li><li class="depth-1"><a href="milena.consume.html#var-commit-sync"><div class="inner"><span>commit-sync</span></div></a></li><li class="depth-1"><a href="milena.consume.html#var-committed"><div class="inner"><span>committed</span></div></a></li><li class="depth-1"><a href="milena.consume.html#var-consumer.3F"><div class="inner"><span>consumer?</span></div></a></li><li class="depth-1"><a href="milena.consume.html#var-fast-forward"><div class="inner"><span>fast-forward</span></div></a></li><li class="depth-1"><a href="milena.consume.html#var-find-first"><div class="inner"><span>find-first</span></div></a></li><li class="depth-1"><a href="milena.consume.html#var-find-last"><div class="inner"><span>find-last</span></div></a></li><li class="depth-1"><a href="milena.consume.html#var-find-ts"><div class="inner"><span>find-ts</span></div></a></li><li class="depth-1"><a href="milena.consume.html#var-listen"><div class="inner"><span>listen</span></div></a></li><li class="depth-1"><a href="milena.consume.html#var-listening"><div class="inner"><span>listening</span></div></a></li><li class="depth-1"><a href="milena.consume.html#var-listening.3F"><div class="inner"><span>listening?</span></div></a></li><li class="depth-1"><a href="milena.consume.html#var-make"><div class="inner"><span>make</span></div></a></li><li class="depth-1"><a href="milena.consume.html#var-metrics"><div class="inner"><span>metrics</span></div></a></li><li class="depth-1"><a href="milena.consume.html#var-partitions"><div class="inner"><span>partitions</span></div></a></li><li class="depth-1"><a href="milena.consume.html#var-pause"><div class="inner"><span>pause</span></div></a></li><li class="depth-1"><a href="milena.consume.html#var-paused"><div class="inner"><span>paused</span></div></a></li><li class="depth-1"><a href="milena.consume.html#var-paused.3F"><div class="inner"><span>paused?</span></div></a></li><li class="depth-1"><a href="milena.consume.html#var-poll"><div class="inner"><span>poll</span></div></a></li><li class="depth-1"><a href="milena.consume.html#var-poll-partitions"><div class="inner"><span>poll-partitions</span></div></a></li><li class="depth-1"><a href="milena.consume.html#var-poll-seq"><div class="inner"><span>poll-seq</span></div></a></li><li class="depth-1"><a href="milena.consume.html#var-position"><div class="inner"><span>position</span></div></a></li><li class="depth-1"><a href="milena.consume.html#var-resume"><div class="inner"><span>resume</span></div></a></li><li class="depth-1"><a href="milena.consume.html#var-rewind"><div class="inner"><span>rewind</span></div></a></li><li class="depth-1"><a href="milena.consume.html#var-safely"><div class="inner"><span>safely</span></div></a></li><li class="depth-1"><a href="milena.consume.html#var-seek"><div class="inner"><span>seek</span></div></a></li><li class="depth-1"><a href="milena.consume.html#var-topics"><div class="inner"><span>topics</span></div></a></li><li class="depth-1"><a href="milena.consume.html#var-unblock"><div class="inner"><span>unblock</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">milena.consume</h1><div class="doc"><pre class="plaintext">Everything related to Kafka consumers
</pre></div><div class="public anchor" id="var-close"><h3>close</h3><div class="usage"><code>(close consumer)</code><code>(close consumer timeout-ms)</code></div><div class="doc"><pre class="plaintext">Tries to close the consumer cleanly within the given timeout or a default one of 30 seconds.

It will try to complete pending commits and leave the group. If auto-commit is enabled,
the current offsets will be committed. If those operations aren't completed when the timeout
is reached, the consumer will be force closed.

Note that `unblock` cannot be used to interrupt this fn.


@ consumer
  Kafka consumer.

@ timeout-ms
  Timeout in milliseconds.

=&gt; nil


Throws

  org.apache.kafka.common.errors

    InterruptException
    When the thread is interrupted while blocked.</pre></div></div><div class="public anchor" id="var-commit-async"><h3>commit-async</h3><div class="usage"><code>(commit-async consumer)</code><code>(commit-async consumer callback)</code><code>(commit-async consumer ?callback offsets)</code></div><div class="doc"><pre class="plaintext">Asynchronously commits offsets to Kafka.

If none are given, commits offsets from the last call to `poll`.

The committed offsets will be used on the first fetch after every assignment and also on startup.
As such, if the user need to store offsets anywhere else, this fn should not be used.

Actually commits on the next trip to the server, such as calling `poll`.

The callback must accept as arguments a possible exception and a map of [topic partition] -&gt; committed offset.


@ consumer
  Kafka consumer.

@ callback / ?callback
  Cf.

=&gt; `consumer`


Ex. (commit-sync consumer)

    (commit-sync consumer
                 (fn [exception offsets]
                    ...))

    (commit-sync consumer
                 (fn [exception offsets]
                   (when-not exception
                     (println "Should be true :"
                              (= (get offsets
                                      ["my-topic" 0])
                                 24))))
                 {["my-topic"      0] 24
                  ["another-topic" 3] 84})


Throws

  Cf. `commit-sync` for exceptions</pre></div></div><div class="public anchor" id="var-commit-sync"><h3>commit-sync</h3><div class="usage"><code>(commit-sync consumer)</code><code>(commit-sync consumer offsets)</code></div><div class="doc"><pre class="plaintext">Synchronously commits offsets to Kafka.

If none are given, commits offsets from the last call to `poll`.

The committed offsets will be used on the first fetch after every assignment and also on startup.
As such, if the user need to store offsets anywhere else, this fn should not be used.


@ consumer
  Kafka consumer.

@ offsets
  Map of [topic partition] to offsets.

=&gt; `consumer`


Ex. (commit-sync consumer)

    (commit-sync consumer
                 {["my-topic"      0] 24
                  ["another-topic" 3] 84})


Throws

  org.apache.kafka.clients.consumer

    CommitFailedException
    When the commit failed and cannot be retried (only occurs when using subscriptions or if there is an active
    groupe with the same groupId).

  org.apache.kafka.common.errors

    WakeupException
    When `unblock` is called before or while this fn is called.

    InterruptException
    When the calling thread is interrupted.

    AuthorizationException
    When not authorized to the specified topic.

    KafkaException
    Any other unrecoverable errors.</pre></div></div><div class="public anchor" id="var-committed"><h3>committed</h3><div class="usage"><code>(committed consumer topic-partitions)</code><code>(committed consumer topic partition)</code></div><div class="doc"><pre class="plaintext">Gets the last committed offset for one or several partitions.

May block if the partition is not assigned to this consumer or if the consumer hasn't yet initialized its cache of committed
offsets.


@ consumer
  Kafka consumer.

---

@ topic-partitions
  List of [topic partition].
  Cf. `milena.interop.java/topic-partition`

=&gt; Map of [topic partition] to offsets.

---

@ topic
  Topic name.

@ partition
  Partition number.

=&gt; Offset.


Ex. (committed consumer
               "my-topic"
               0)
    =&gt; 42

    (committed consumer
               [["my-topic"      0]
                ["another-topic" 3]])
    =&gt; {["my-topic"      0] 42
        ["another-topic" 3] 84}</pre></div></div><div class="public anchor" id="var-consumer.3F"><h3>consumer?</h3><div class="usage"><code>(consumer? x)</code></div><div class="doc"><pre class="plaintext">Is this a consumer ?
</pre></div></div><div class="public anchor" id="var-fast-forward"><h3>fast-forward</h3><div class="usage"><code>(fast-forward consumer topic-partitions)</code><code>(fast-forward consumer)</code><code>(fast-forward consumer topic partition)</code></div><div class="doc"><pre class="plaintext">Fast forwards a consumer to the last offset (ie. offset of the last message + 1) for one or
several partitions.

Happens lazily on the next call to `poll` or `position`.

If no partition is given, applies to all currently assigned partitions.


@ consumer
  Kafka consumer.

---

@ topic-partitions
  List of [topic partition].
  Cf. `milena.interop.java/topic-partition`

---

@ topic
  Topic name.

@ partition
  Partition number.

---

=&gt; `consumer`


Ex. (fast-forward consumer
                  "my-topic"
                  0)

    (fast-forward consumer
                  [["my-topic"      0]
                   ["another-topic" 3]])</pre></div></div><div class="public anchor" id="var-find-first"><h3>find-first</h3><div class="usage"><code>(find-first consumer topic-partitions)</code><code>(find-first consumer topic partition)</code></div><div class="doc"><pre class="plaintext">Finds the first available offset of the given topic-partition(s).

&lt;!&gt; Blocks forever if the topic doesn't exist and dynamic creation has been disabled server-side.


@ consumer
  Kafka consumer.

---

@ topic-partitions
  List of [topic partition].
  Cf. `milena.interop.java/topic-partition`

=&gt; Map of [topic partition] to offset.

---

@ topic
  Topic name.

@ partition
  Partition number.

=&gt; Offset.


Ex. (find-first consumer
                "my-topic"
                0)
    =&gt; 421

    (find-first consumer
                [["my-topic"      0]
                 ["another-topic" 3]])
    =&gt; {["my-topic"      0] 421
        ["another-topic" 3] 842}</pre></div></div><div class="public anchor" id="var-find-last"><h3>find-last</h3><div class="usage"><code>(find-last consumer topic-partitions)</code><code>(find-last consumer topic partition)</code></div><div class="doc"><pre class="plaintext">Finds the latest offset of the given partition(s), ie. the offset of the last message + 1.

@ consumer
  Kafka consumer.

---

@ topic-partitions
  List of [topic partition].
  Cf. `milena.interop.java/topic-partition`

=&gt; Map of [topic partition] to offset.

---

@ topic
  Topic name.

@ partition
  Partition number.

=&gt; Offset.


Cf. `find-first`</pre></div></div><div class="public anchor" id="var-find-ts"><h3>find-ts</h3><div class="usage"><code>(find-ts consumer timestamps)</code><code>(find-ts consumer topic partition ts)</code></div><div class="doc"><pre class="plaintext">Finds offsets for the given partition(s) by timestamp, ie. the earliest offsets whose timestamp
is greater than or equal to the corresponding ones.

&lt;!&gt; Blocks forever if the topic doesn't exist and dynamic creation has been disabled server-side.


@ consumer
  Kafka consumer.

---

@ topic-partitions
  List of [topic partition].
  Cf. `milena.interop.java/topic-partition`

=&gt; Map of [topic partition] to results.

   + results
     {:timestamp
       Unix timestamp of the record.

      :offset
       Offset in the partition.}

---

@ topic
  Topic name.

@ partition
  Partition number.

=&gt; Offset.


Ex. (find-ts consumer
             "my-topic"
             0
             1507812268270)
    =&gt; 42

    (find-ts consumer
             {["my-topic"      0] 1507812268270
              ["another-topic" 3] 1507812338294})
    =&gt; {["my-topic"      0] {:timestamp 1507812268270
                               :offset    42
        ["another-topic" 3] {:timestamp 1507812338294
                               :offset    84}</pre></div></div><div class="public anchor" id="var-listen"><h3>listen</h3><div class="usage"><code>(listen consumer source)</code><code>(listen consumer source f-rebalance)</code></div><div class="doc"><pre class="plaintext">Subscribes a consumer to topics or assigns it to specific partitions.

An assignement precisely refers to a [topic partition] whereas a subscription only ask for a topic,
the partition being assigned dynamically.

&lt;!&gt; A consumer can only consume from one type of source. This fn will throw if
    the user try to mix, for instance, subscriptions and assignments, or regexes
    and strings.


@ consumer
  Kafka consumer.

@ source
  One of : regular expression representing topics to subscribe to
         | list of topics as strings to subscribe to
         | list of [topic partition] to be assigned to
         | nil

@ f-rebalance
  Optional fn for subscriptions.
  Cf. `milena.interop.java/consumer-rebalance-listener`



Ex. (listen consumer
            #"topic-.+"
            (fn [assigned? topic-partitions]
              (when assigned?
                ...)))

    (listen consumer
            ["my-topic"
             "another-topic"])

    (listen consumer
            [["my-topic"      0]
             ["another-topic" 3]])

    (listen consumer
            nil)</pre></div></div><div class="public anchor" id="var-listening"><h3>listening</h3><div class="usage"><code>(listening consumer)</code></div><div class="doc"><pre class="plaintext">Gets all the partitions the consumer is assigned to or its subscriptions.


@ consumer
  Kafka consumer.

=&gt; {:partitions
     Set of topic-partitions.
     Cf. `milena.interop.clj/topic-partition`

    :subscriptions
     Set of topic names.}


Cf. `listen`</pre></div></div><div class="public anchor" id="var-listening.3F"><h3>listening?</h3><div class="usage"><code>(listening? consumer source)</code></div><div class="doc"><pre class="plaintext">Is the consumer listening to the given topic / [topic partition] ?
</pre></div></div><div class="public anchor" id="var-make"><h3>make</h3><div class="usage"><code>(make)</code><code>(make {:as ?opts, :keys [?nodes ?config ?deserializer ?deserializer-key ?deserializer-value ?listen], :or {?nodes [["localhost" 9092]], ?deserializer $.deserialize/byte-array, ?deserializer-key ?deserializer, ?deserializer-value ?deserializer}})</code></div><div class="doc"><pre class="plaintext">Builds a Kafka consumer.

&lt;!&gt; Consumers are NOT thread safe !
    1 consumer / thread or a queueing policy must be implemented.


@ ?opts
  {:?nodes
    List of [host port].

   :?config
    Kafka configuration map.
    Cf. <a href="https://kafka.apache.org/documentation/#newconsumerconfigs">https://kafka.apache.org/documentation/#newconsumerconfigs</a>

   :?deserializer
    Kafka deserializer or fn eligable for becoming one.
    Cf. `milena.deserialize`
        `milena.deserialize/make`

   :?deserializer-key
    Defaulting to `?deserializer`.

   :?deserializer-value
    Defaulting to `?deserializer`.

   :?listen
    Subscribes or assigns this new consumer.
    Cf. `listen`}

=&gt; org.apache.kafka.clients.consumer.KafkaConsumer


Ex. (make {:?nodes              [["some_host" 9092]]
           :?config             {:group.id           "my_group"
                                 :enable.auto.commit false}
           :?deserializer-key   milena.deserialize/string
           :?deserializer-value (fn [_ data]
                                  (nippy/thaw data))
           :?listen             [["my-topic" 3]]})</pre></div></div><div class="public anchor" id="var-metrics"><h3>metrics</h3><div class="usage"><code>(metrics consumer)</code></div><div class="doc"><pre class="plaintext">Gets metrics about this consumer.

@ consumer
  Kafka consumer.

=&gt; Cf. `milena.interop.clj/metrics`</pre></div></div><div class="public anchor" id="var-partitions"><h3>partitions</h3><div class="usage"><code>(partitions consumer topic)</code></div><div class="doc"><pre class="plaintext">Gets a list of partitions for a given topic.


@ consumer
  Kafka consumer.

@ topic
  Topic name.

=&gt; List of partitions.
   Cf. `interop.clj/partition-info`


Throws

  org.apache.kafka.common.errors

    WakeupException
    When `unblock` is called before or while this fn is called.

    InterruptException
    When the calling thread is interrupted.

    AuthorizationException
    When not authorized to the specified topic.

    TimeoutException
    When the topic metadata could not be fetched before expiration of the configured request timeout.

    KafkaException
    Any other unrecoverable errors.</pre></div></div><div class="public anchor" id="var-pause"><h3>pause</h3><div class="usage"><code>(pause consumer topic-partitions)</code><code>(pause consumer topic partition)</code></div><div class="doc"><pre class="plaintext">Temporarely pauses consumption.


@ consumer
  Kafka consumer.

---

@ topic-partitions
  List of [topic partition].
  Cf. `milena.interop.java/topic-partition`

---

@ topic
  Topic name.

@ partition
  Partition number.

---

 =&gt; `consumer`


 Ex. (pause consumer
            "my-topic"
            0)

     (pause consumer
            [["my-topic"      0]
             ["another-topic" 3]])</pre></div></div><div class="public anchor" id="var-paused"><h3>paused</h3><div class="usage"><code>(paused consumer)</code></div><div class="doc"><pre class="plaintext">@ consumer
  Kafka consumer.

=&gt; Set of [topic partition] currently paused.
   Cf. `pause`</pre></div></div><div class="public anchor" id="var-paused.3F"><h3>paused?</h3><div class="usage"><code>(paused? consumer topic-partition)</code><code>(paused? consumer topic partition)</code></div><div class="doc"><pre class="plaintext">Is a [topic partition] currenly paused ?

Cf. `pause`
    `paused`</pre></div></div><div class="public anchor" id="var-poll"><h3>poll</h3><div class="usage"><code>(poll consumer)</code><code>(poll consumer ?timeout-ms)</code></div><div class="doc"><pre class="plaintext">Synchronously polls records.


@ consumer
  Kafka consumer.

@ ?timeout-ms
  Optional timeout in milliseconds.
    Nil will wait forever.
    0   returns what is available in the consumer buffer without blocking.

=&gt; Sequence of individual records.
   Cf. `milena.interop.clj/consumer-record`


Throws

  org.apache.kafka.clients.consumer

    InvalidOffsetException
      When the offset for a partition or set of partitions is undefined or out of range and no offset
      reset policy has been configured.

  org.apache.kafka.common.errors

    WakeupException
      When `unblock` is called while blocking.

    InterruptException
      The calling thread is interrupted while blocking.

    AuthorizationException
      When not authorized to any of the assigned topics or to the configured groupId.

    KafkaException
      Any other unrecoverable errors (eg. deserializing key/value).</pre></div></div><div class="public anchor" id="var-poll-partitions"><h3>poll-partitions</h3><div class="usage"><code>(poll-partitions consumer)</code><code>(poll-partitions consumer ?timeout-ms)</code></div><div class="doc"><pre class="plaintext">Synchronously polls records by partitions.

Behaves exactly like `poll` but returns a map of [topic partition] to sequence of individual records.

More efficient when the consumer polls several partitions in order to dispatch the results to workers.


Cf. `poll`</pre></div></div><div class="public anchor" id="var-poll-seq"><h3>poll-seq</h3><div class="usage"><code>(poll-seq consumer)</code><code>(poll-seq consumer ?timeout-ms)</code></div><div class="doc"><pre class="plaintext">Convert a consumer to a sequence of individual records by continuously calling `poll`.


Ex. (take 5
          (to-seq consumer))


Cf. `poll` for arguments and exceptions.</pre></div></div><div class="public anchor" id="var-position"><h3>position</h3><div class="usage"><code>(position consumer topic-partitions)</code><code>(position consumer topic partition)</code></div><div class="doc"><pre class="plaintext">Gets the current offset of a consumer on one or several partitions.


@ consumer
  Kafka consumer.

---

@ topic-partitions
  List of [topic partition].
  Cf. `milena.interop.java/topic-partition`

=&gt; Map of [topic partition] to positions.

---

@ topic
  Topic name.

@ partition
  Partition number.

=&gt; Position. 


Ex. (position consumer
              "my-topic"
              0)
    =&gt; 42

    (position consumer
              [["my-topic"      0]
               ["another-topic" 3]])
    =&gt; {["my-topic"      0] 42
        ["another-topic" 3] 84}


Throws

  org.apache.kafka.common.errors

    WakeupException
    When `unblock` is called before or while this fn is called.

    InterruptException
    When the calling thread is interrupted.

    AuthorizationException
    When not authorized to the specified topic.

    TimeoutException
    When the topic metadata could not be fetched before expiration of the configured request timeout.

    KafkaException
    Any other unrecoverable errors.</pre></div></div><div class="public anchor" id="var-resume"><h3>resume</h3><div class="usage"><code>(resume consumer)</code><code>(resume consumer topic-partitions)</code><code>(resume consumer topic partition)</code></div><div class="doc"><pre class="plaintext">Resumes consumptions.

Resumes everything if no other arg than the consumer is provided.


@ consumer
  Kafka consumer.

---

@ topic-partitions
  List of [topic partition].
  Cf. `milena.interop.java/topic-partition`

---

@ topic
  Topic name.

@ partition
  Partition number.

---

=&gt; `consumer`


Ex. (resume consumer)
 
    (resume "my-topic"
            0)

    (resume [["my-topic"      0]
             ["another-topic" 3]])


Cf. `pause`</pre></div></div><div class="public anchor" id="var-rewind"><h3>rewind</h3><div class="usage"><code>(rewind consumer)</code><code>(rewind consumer topic-partitions)</code><code>(rewind consumer topic partition)</code></div><div class="doc"><pre class="plaintext">Rewinds a consumer to the first offset (ie. offset of the first available message) for one or
several partitions.

Happens lazily on the next call to `poll` or `position`.

If no partition is given, applies to all currently assigned partitions.


@ consumer
  Kafka consumer.

---

@ topic-partitions
  List of [topic partition].
  Cf. `milena.interop.java/topic-partition`

---

@ topic
  Topic name.

@ partition
  Partition number.

---

=&gt; `consumer`


Ex. (rewind consumer
            "my-topic"
            0)

    (rewind consumer
            [["my-topic"      0]
             ["another-topic" 3]])</pre></div></div><div class="public anchor" id="var-safely"><h3>safely</h3><h4 class="type">macro</h4><div class="usage"><code>(safely consumer timeout-ms &amp; body)</code></div><div class="doc"><pre class="plaintext">If the body doesn't compute before the required timeout, `unblock` will be called on the consumer.
</pre></div></div><div class="public anchor" id="var-seek"><h3>seek</h3><div class="usage"><code>(seek consumer positions)</code><code>(seek consumer topic partition position)</code></div><div class="doc"><pre class="plaintext">Seeks one or several partitions to a new offset.

Happens lazily on the next call to `poll`.

Note that you may loose data if this fn is arbitrarily called in the middle of consumption.


@ consumer
  Kafka consumer.

---

@ positions
  Map of [topic partition] to new positions.
  Cf. `milena.interop.java/topic-partition`

---

@ topic
  Topic name.

@ partition
  Partition number.

@ position
  New position.

---

=&gt; `consumer`


Ex. (seek consumer
          "my-topic"
          0
          42)

    (seek consumer
          {["my-topic"      0] 42
           ["another-topic" 3] 84})</pre></div></div><div class="public anchor" id="var-topics"><h3>topics</h3><div class="usage"><code>(topics consumer)</code></div><div class="doc"><pre class="plaintext">Gets a list of metadata about partitions for all the topics the consumer is authorized to consume.


@ consumer
  Kafka consumer.

=&gt; Map of topic names to partition infos.
   Cf. `$.interop.clj/partition-info`


Throws

  org.apache.kafka.common.errors

    WakeupException
    When `unblock` is called before or while this fn is called.

    InterruptException
    When the calling thread is interrupted before of while this fn is called.

    TimeoutException
    When the topic metadata could not be fetched before expiration of the configured request timeout.

    KafkaException
    Any other unrecoverable errors.</pre></div></div><div class="public anchor" id="var-unblock"><h3>unblock</h3><div class="usage"><code>(unblock consumer)</code></div><div class="doc"><pre class="plaintext">From another thread, unblocks the consumer.

The blocking thread will throw an org.apache.kafka.common.errors.WakeupException.

If the thread isn't blocking on a fn which can throw such an exception, the next call
to such a fn will raise it instead.

Must be used sparingly, not to compensate for a bad design.


@ consumer
  Kafka consumer.

=&gt; `consumer`</pre></div></div></div></body></html>