<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>dvlopt.kafka.in.mock documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Kafka</span> <span class="project-version">1.3.1</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>dvlopt</span></div></div></li><li class="depth-2"><a href="dvlopt.kafka.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>kafka</span></div></a></li><li class="depth-3 branch"><a href="dvlopt.kafka.admin.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>admin</span></div></a></li><li class="depth-3"><a href="dvlopt.kafka.in.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>in</span></div></a></li><li class="depth-4 current"><a href="dvlopt.kafka.in.mock.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>mock</span></div></a></li><li class="depth-3"><a href="dvlopt.kafka.out.html"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>out</span></div></a></li><li class="depth-4"><a href="dvlopt.kafka.out.mock.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>mock</span></div></a></li><li class="depth-2"><a href="dvlopt.kstreams.html"><div class="inner"><span class="tree" style="top: -176px;"><span class="top" style="height: 185px;"></span><span class="bottom"></span></span><span>kstreams</span></div></a></li><li class="depth-3 branch"><a href="dvlopt.kstreams.builder.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>builder</span></div></a></li><li class="depth-3 branch"><a href="dvlopt.kstreams.ctx.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>ctx</span></div></a></li><li class="depth-3 branch"><a href="dvlopt.kstreams.mock.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>mock</span></div></a></li><li class="depth-3 branch"><a href="dvlopt.kstreams.store.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>store</span></div></a></li><li class="depth-3 branch"><a href="dvlopt.kstreams.stream.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>stream</span></div></a></li><li class="depth-3 branch"><a href="dvlopt.kstreams.table.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>table</span></div></a></li><li class="depth-3"><a href="dvlopt.kstreams.topology.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>topology</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="dvlopt.kafka.in.mock.html#var-add-record"><div class="inner"><span>add-record</span></div></a></li><li class="depth-1"><a href="dvlopt.kafka.in.mock.html#var-during-next-poll"><div class="inner"><span>during-next-poll</span></div></a></li><li class="depth-1"><a href="dvlopt.kafka.in.mock.html#var-mock-consumer"><div class="inner"><span>mock-consumer</span></div></a></li><li class="depth-1"><a href="dvlopt.kafka.in.mock.html#var-rebalance"><div class="inner"><span>rebalance</span></div></a></li><li class="depth-1"><a href="dvlopt.kafka.in.mock.html#var-set-beginning-offsets"><div class="inner"><span>set-beginning-offsets</span></div></a></li><li class="depth-1"><a href="dvlopt.kafka.in.mock.html#var-set-end-offsets"><div class="inner"><span>set-end-offsets</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">dvlopt.kafka.in.mock</h1><div class="doc"><pre class="plaintext">Mocking Kafka consumers.
</pre></div><div class="public anchor" id="var-add-record"><h3>add-record</h3><div class="usage"><code>(add-record mock-consumer record)</code></div><div class="doc"><pre class="plaintext">Adds a record for the next poll operation.

Polling subsequently deletes all records that have been added up to that point. Hence, those records cannot be consumed more than
once.


Cf. `dvlopt.kafka.in/poll` for the structure of a record</pre></div></div><div class="public anchor" id="var-during-next-poll"><h3>during-next-poll</h3><div class="usage"><code>(during-next-poll mock-consumer f)</code></div><div class="doc"><pre class="plaintext">Next time this mock consumer polls records, no-op `f` will be executed.

`f` can safely be executed in a multithreaded situtation.</pre></div></div><div class="public anchor" id="var-mock-consumer"><h3>mock-consumer</h3><div class="usage"><code>(mock-consumer)</code><code>(mock-consumer options)</code></div><div class="doc"><pre class="plaintext">Builds a mock Kafka consumer for testing purposes. It can use the `dvlopt.kafka.in` API like a regular consumer.

Like regular consumers, mock ones are not thread-safe.


A map of options may be provided :

  ::ofset-reset-strategy
    One of :

      :ealiest
       Consumption of records will start from the beginning (ie. what has been set by a subsequent call to `set-beginning-offsets`).

      :latest (default)
       Consumption of records will start from the known end (ie. what has been set by a subsequent call to `set-end-offsets`).</pre></div></div><div class="public anchor" id="var-rebalance"><h3>rebalance</h3><div class="usage"><code>(rebalance mock-consumer topic-partitions)</code></div><div class="doc"><pre class="plaintext">Simulates a rebalance event just like when consumers join or leave the relevant consumer group.
</pre></div></div><div class="public anchor" id="var-set-beginning-offsets"><h3>set-beginning-offsets</h3><div class="usage"><code>(set-beginning-offsets mock-consumer topic-partition-&gt;offset)</code></div><div class="doc"><pre class="plaintext">Sets beginning offsets by following a map of [topic partition] -&gt; offset.
</pre></div></div><div class="public anchor" id="var-set-end-offsets"><h3>set-end-offsets</h3><div class="usage"><code>(set-end-offsets mock-consumer topic-partition-&gt;offset)</code></div><div class="doc"><pre class="plaintext">Sets end offsets by following a map of [topic partition] -&gt; offset.
</pre></div></div></div></body></html>