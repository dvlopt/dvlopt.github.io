<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>dvlopt.kafka.admin documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Kafka</span> <span class="project-version">1.0.0-beta0</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>dvlopt</span></div></div></li><li class="depth-2"><a href="dvlopt.kafka.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>kafka</span></div></a></li><li class="depth-3 branch current"><a href="dvlopt.kafka.admin.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>admin</span></div></a></li><li class="depth-3 branch"><a href="dvlopt.kafka.in.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>in</span></div></a></li><li class="depth-3"><a href="dvlopt.kafka.out.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>out</span></div></a></li><li class="depth-2"><a href="dvlopt.kstreams.html"><div class="inner"><span class="tree" style="top: -114px;"><span class="top" style="height: 123px;"></span><span class="bottom"></span></span><span>kstreams</span></div></a></li><li class="depth-3 branch"><a href="dvlopt.kstreams.builder.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>builder</span></div></a></li><li class="depth-3 branch"><a href="dvlopt.kstreams.ctx.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>ctx</span></div></a></li><li class="depth-3 branch"><a href="dvlopt.kstreams.store.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>store</span></div></a></li><li class="depth-3 branch"><a href="dvlopt.kstreams.stream.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>stream</span></div></a></li><li class="depth-3 branch"><a href="dvlopt.kstreams.table.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>table</span></div></a></li><li class="depth-3"><a href="dvlopt.kstreams.topology.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>topology</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="dvlopt.kafka.admin.html#var-acls"><div class="inner"><span>acls</span></div></a></li><li class="depth-1"><a href="dvlopt.kafka.admin.html#var-admin"><div class="inner"><span>admin</span></div></a></li><li class="depth-1"><a href="dvlopt.kafka.admin.html#var-close"><div class="inner"><span>close</span></div></a></li><li class="depth-1"><a href="dvlopt.kafka.admin.html#var-cluster"><div class="inner"><span>cluster</span></div></a></li><li class="depth-1"><a href="dvlopt.kafka.admin.html#var-configuration"><div class="inner"><span>configuration</span></div></a></li><li class="depth-1"><a href="dvlopt.kafka.admin.html#var-configure"><div class="inner"><span>configure</span></div></a></li><li class="depth-1"><a href="dvlopt.kafka.admin.html#var-consumer-group-offsets"><div class="inner"><span>consumer-group-offsets</span></div></a></li><li class="depth-1"><a href="dvlopt.kafka.admin.html#var-consumer-groups"><div class="inner"><span>consumer-groups</span></div></a></li><li class="depth-1"><a href="dvlopt.kafka.admin.html#var-create-acls"><div class="inner"><span>create-acls</span></div></a></li><li class="depth-1"><a href="dvlopt.kafka.admin.html#var-create-topics"><div class="inner"><span>create-topics</span></div></a></li><li class="depth-1"><a href="dvlopt.kafka.admin.html#var-delete-acls"><div class="inner"><span>delete-acls</span></div></a></li><li class="depth-1"><a href="dvlopt.kafka.admin.html#var-delete-records-before"><div class="inner"><span>delete-records-before</span></div></a></li><li class="depth-1"><a href="dvlopt.kafka.admin.html#var-delete-topics"><div class="inner"><span>delete-topics</span></div></a></li><li class="depth-1"><a href="dvlopt.kafka.admin.html#var-describe-consumer-groups"><div class="inner"><span>describe-consumer-groups</span></div></a></li><li class="depth-1"><a href="dvlopt.kafka.admin.html#var-describe-topics"><div class="inner"><span>describe-topics</span></div></a></li><li class="depth-1"><a href="dvlopt.kafka.admin.html#var-increase-partitions"><div class="inner"><span>increase-partitions</span></div></a></li><li class="depth-1"><a href="dvlopt.kafka.admin.html#var-topics"><div class="inner"><span>topics</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">dvlopt.kafka.admin</h1><div class="doc"><pre class="plaintext">Kafka administration.


Functions accepting a timeout relies on the default request timeout of the admin client when none
is provided. Time intervals are described in `dvlopt.kafka`.</pre></div><div class="public anchor" id="var-acls"><h3>acls</h3><div class="usage"><code>(acls admin)</code><code>(acls admin acl-filter)</code><code>(acls admin acl-filter options)</code></div><div class="doc"><pre class="plaintext">Requests needed ACLs.

Returns a future resolving to a list of ACLs or throwing in case of error.


The ACL filter is a nilable map which may contain :

  ::operation
   Type of ACL, one of #{:all (default)
                         :alter
                         :alter-configuration
                         :any
                         :cluster-action
                         :create
                         :delete
                         :describe
                         :describe-configuration
                         :idempotent-write
                         :read
                         :write}.

 ::name-pattern
  [Filter-Type String] where Filter-Type is one of :

    :any (default)
     String unneeded as it maches anything.

    :exactly
     Will match the given string and nothing else.

    :match
     Like :exactly and :prefixed but also expands wildcards (ie. "*" like in globs).

    :prefixed
     Will match anything beginning with the given string.

  A nil value will match anything.

 ::permission
  One of #{:any (default)
           :allow
           :deny}.

 ::principal
  Who.


 ::resource-type
  One of #{:any (default)
           :cluster
           :consumer-group
           :topic
           :transactional-id}.

:dvlopt.kafka/host
 Restricts to the given host or none if this option is not provided.


A map of options may be given :

  :dvlopt.kafka/timeout
   Cf. Namespace description


Ex. (acls admin
          {::permission    :allow
           ::operation     :create
           ::resource-type :topic
           ::name-pattern  [:match "my_*_topic"]}
          {:dvlopt.kafka/timeout [5 :seconds]})</pre></div></div><div class="public anchor" id="var-admin"><h3>admin</h3><div class="usage"><code>(admin)</code><code>(admin options)</code></div><div class="doc"><pre class="plaintext">Creates an admin client.

A map of options may be given :

  ::configuration
    Map of Kafka admin properties.
    Cf. <a href="https://kafka.apache.org/documentation/#adminclientconfigs">https://kafka.apache.org/documentation/#adminclientconfigs</a>

  :dvlopt.kafka/nodes
    List of [host port].


Ex. (client {::configuration     {"client.id" "some_id"}
             :dvlopt.kafka/nodes [["some_host" 9092]]})</pre></div></div><div class="public anchor" id="var-close"><h3>close</h3><div class="usage"><code>(close admin)</code><code>(close admin options)</code></div><div class="doc"><pre class="plaintext">Closes the admin client and releases all associated resources.

A map of options may be given :

  :dvlopt.kafka/timeout
   Grace period during which current operations will be allowed to complete and no new ones will be accepted.
   Futures related to unfinished operations will throw when dereferenced.
   Cf. Namespace description</pre></div></div><div class="public anchor" id="var-cluster"><h3>cluster</h3><div class="usage"><code>(cluster admin)</code><code>(cluster admin options)</code></div><div class="doc"><pre class="plaintext">Requests a map containing information about the nodes in the cluster :

  :dvlopt.kafka/f*id
   Future, the id of the cluster.

  :dvlopt.kafka/f*nodes
   Future, a list of the cluster's nodes.

  :dvlopt.kafka/f*controller-node
   Future, the controller node.


A map of options may be given :

  :dvlopt.kafka/timeout
   Cf. Namespace description</pre></div></div><div class="public anchor" id="var-configuration"><h3>configuration</h3><div class="usage"><code>(configuration admin resources)</code><code>(configuration admin resources options)</code></div><div class="doc"><pre class="plaintext">Requests the current configuration of the given resources (brokers and/or topics).

Each property points to a map containing :

  :dvlopt.kafka/default?
   Is this a default value ?

  :dvlopt.kafka/name
   Name of the property.

  :dvlopt.kafka/read-only? 
   Is this a read-only property ?

  :dvlopt.kafka/string-value
   Value presented as a string.

  ::sensitive?
   Is this a sensitive value that should be kept secret ?


A map of options may be given :

  :dvlopt.kafka/timeout
   Cf. Namespace description


Ex. (configuration admin
                   {:dvlopt.kafka/brokers #{"0"
                                            "1"}
                    :dvlopt.kafka/topics  #{"topic-one"
                                            "topic-two"}}
                   {:dvlopt.kafka/timeout [5 :seconds]})</pre></div></div><div class="public anchor" id="var-configure"><h3>configure</h3><div class="usage"><code>(configure admin configurations)</code><code>(configure admin configurations options)</code></div><div class="doc"><pre class="plaintext">Requests modifications in the configuration of the given resources (brokers and/or topics).


Cf. <a href="https://kafka.apache.org/documentation/#brokerconfigs">https://kafka.apache.org/documentation/#brokerconfigs</a>
    <a href="https://kafka.apache.org/documentation/#topicconfigs">https://kafka.apache.org/documentation/#topicconfigs</a>


Returns a map containing the involved brokers and topics, pointing to futures throwing an exception in case of failure.


A map of options may be given :

  :dvlopt.kafka/timeout
   Cf. Namespace description


Ex. (configure admin
               {::configuration.brokers {"0" {"delete.topic.enable" true}}
                ::configuration.topics  {"my-topic" {"cleanup.policy" "compact"}}}
               {:dvlopt.kafka/timeout [5 :seconds]})</pre></div></div><div class="public anchor" id="var-consumer-group-offsets"><h3>consumer-group-offsets</h3><div class="usage"><code>(consumer-group-offsets admin consumer-group)</code><code>(consumer-group-offsets admin consumer-group options)</code></div><div class="doc"><pre class="plaintext">For the given consumer group, requests a map of [topic partition] -&gt; map containing the current :dvlopt.kafka/offset.


A map of options may be given :

  :dvlopt.kafka/timeout
   Cf. Namespace description

  :dvlopt.kafka/topic-partitions
   Restricts result to the requested [topic partition]'s.</pre></div></div><div class="public anchor" id="var-consumer-groups"><h3>consumer-groups</h3><div class="usage"><code>(consumer-groups admin)</code><code>(consumer-groups admin options)</code></div><div class="doc"><pre class="plaintext">Requests a map of current consumer group -&gt; metadata.

A map of options may be given :

  :dvlopt.kafka/timeout
   Cf. Namespace description</pre></div></div><div class="public anchor" id="var-create-acls"><h3>create-acls</h3><div class="usage"><code>(create-acls admin acls)</code><code>(create-acls admin acls options)</code></div><div class="doc"><pre class="plaintext">Requests the creation of new ACLs (a list of maps akin to filters described in `acls`).

Returns a map of ACL -&gt; future throwing in case of error.


A map of options may be given :

  :dvlopt.kafka/timeout
   Cf. Namespace description


Ex. (create-acls admin
                 [{::principal     "some.user"
                   ::permission    :allow
                   ::operation     :create
                   ::resource-type :topic
                   ::name-pattern  [:prefixed "some_topics"]}]
                 {:dvlopt.kafka/timeout [5 :seconds]})</pre></div></div><div class="public anchor" id="var-create-topics"><h3>create-topics</h3><div class="usage"><code>(create-topics admin new-topics)</code><code>(create-topics admin new-topics options)</code></div><div class="doc"><pre class="plaintext">Requests the creation of new topics.

This operation is supported by brokers with version 0.10.1.0 or higher.

Returns a map of topic name -&gt; future throwing if an error occured.

New topics are specified by a map of topic name -&gt; argument map.

An argument map consists of either the number of partitions with the replication factor or
a manual assignment of partition numbers  to replica ids. Although not inforced, it is generally a
good idea for all partitions to have the same number of replicas.

Also, each topic can be configured as needed (cf. <a href="https://kafka.apache.org/documentation/#topicconfigs)">https://kafka.apache.org/documentation/#topicconfigs)</a>.


A map of options may be given :

  :dvlopt.kafka/timeout
   Cf. Namespace description


Ex. (create-topics admin
                   {"first-new-topic"  {::number-of-partitions 4
                                          ::replication-factor   1
                                          ::configuration.topic  {"cleanup.policy" "compact"}}
                    "second-new-topic" {::replica-assignments  {0 [0 1]
                                                                  1 [2 3]}}}
                   {:dvlopt.kafka/timeout [5 :seconds]})</pre></div></div><div class="public anchor" id="var-delete-acls"><h3>delete-acls</h3><div class="usage"><code>(delete-acls admin acl-filters)</code><code>(delete-acls admin acl-filters options)</code></div><div class="doc"><pre class="plaintext">Requests the deletion of ACLs following a list of filters (cf. `acls`).

Returns a map of ACL filter -&gt; future resolving to a list of :

  [:acl ACL]         in case of success, where ACL matches the filter

  [:error Exception] in case of failure


A map of options may be given :

  :dvlopt.kafka/timeout
   Cf. Namespace description


Ex. (delete-acls admin
                 [{::principal     "some.user"
                   ::permission    :allow
                   ::operation     :create
                   ::resource-type :topic
                   ::pattern       [:prefixed "some_topics"]}]
                 {:dvlopt.kafka/timeout [5 :seconds]})</pre></div></div><div class="public anchor" id="var-delete-records-before"><h3>delete-records-before</h3><div class="usage"><code>(delete-records-before admin topic-partition-&gt;offset)</code><code>(delete-records-before admin topic-partition-&gt;offset options)</code></div><div class="doc"><pre class="plaintext">Requests the deletion of all records prior to the offset given for each [topic partition].

Returns a map of [topic partition] -&gt; future resolving to {:dvlopt.kafka/lowest-offset ...} or
throwing in case of error.


A map of options may be given :

  :dvlopt.kafka/timeout
   Cf. Namespace description


Ex. (delete-records-before admin
                           {["some_topic" 0] 62}
                           {:dvlopt.kafka/timeout [5 :seconds]})</pre></div></div><div class="public anchor" id="var-delete-topics"><h3>delete-topics</h3><div class="usage"><code>(delete-topics admin topics)</code><code>(delete-topics admin topics options)</code></div><div class="doc"><pre class="plaintext">Requests the deletion of topics.

Returns a map of topic name -&gt; future throwing if an error occured.


A map of options may be given :

  :dvlopt.kafka/timeout
   Cf. Namespace description


Ex. (delete-topics admin
                   ["some-topic"
                    "another-topic"]
                   {:dvlopt.kafka/timeout [5 :seconds]})</pre></div></div><div class="public anchor" id="var-describe-consumer-groups"><h3>describe-consumer-groups</h3><div class="usage"><code>(describe-consumer-groups admin group-ids)</code><code>(describe-consumer-groups admin group-ids options)</code></div><div class="doc"><pre class="plaintext">Given a list of consumer groups to describe, requests a map of consumer group -&gt; detailed metadata.

A map of options may be given :

  :dvlopt.kafka/timeout
   Cf. Namespace description</pre></div></div><div class="public anchor" id="var-describe-topics"><h3>describe-topics</h3><div class="usage"><code>(describe-topics admin topics)</code><code>(describe-topics admin topics options)</code></div><div class="doc"><pre class="plaintext">Given a list of topics to describe, requests a map of topic name -&gt; future resolving to map containing :

 :dvlopt.kafka/internal?
  Is this topic internal ?

 ::partition-descriptions
  List of partition descriptions sorted by partition number, ie. maps containing :

    :dvlopt.kafka/leader-node
     Cf. `dvlopt.kafka` for descriptions of Kafka nodes.

    :dvlopt.kafka/partition
     Partition number.

    :dvlopt.kafka/replica-nodes
     Cf. `dvlopt.kafka` for descriptions of Kafka nodes.


A map of options may be given :

 :dvlopt.kafka/timeout
  Cf. Namespace description</pre></div></div><div class="public anchor" id="var-increase-partitions"><h3>increase-partitions</h3><div class="usage"><code>(increase-partitions admin topics-&gt;new-partitions)</code><code>(increase-partitions admin topics-&gt;new-partitions options)</code></div><div class="doc"><pre class="plaintext">Requests an increase of the number of partitions for the given topics.

&lt;!&gt; Does not repartition existing topics and the partitioning of new records will be different &lt;!&gt;

For each topic, the new number of partitions has to be specified. Can also be supplied the assignements
of the new partitions in form of a list of list of replica ids where the first one is the prefered leader.

Returns a map of topic name -&gt; future throwing if an error occured.

A map of options may be given :

  :dvlopt.kafka/timeout
   Cf. Namespace description


Ex. Given 2 partitions with a replication factor of 3, increases the number to 4 and specifies assignments :

    (partitions-create admin
                       {"some_topic" {::number-of-partitions 4
                                        ::replica-assignments  [[0 1 2]      ;; replicas for partition 3, replica 0 being the prefered leader
                                                                [1 2 3]]}}   ;; replicas for partition 4, replica 1 being the prefered leader
                       {:dvlopt.kafka/timeout [5 :seconds]})</pre></div></div><div class="public anchor" id="var-topics"><h3>topics</h3><div class="usage"><code>(topics admin)</code><code>(topics admin options)</code></div><div class="doc"><pre class="plaintext">Requests a future resolving to a map of topic name -&gt; map containing :

 :dvlopt.kafka/internal?
  Is this topic internal ?


A map of options may be given :

  :dvlopt.kafka/internal?
    Should internal topics be retrieved ?

  :dvlopt.kafka/timeout
   Cf. Namespace description</pre></div></div></div></body></html>