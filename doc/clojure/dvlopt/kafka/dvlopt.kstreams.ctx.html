<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>dvlopt.kstreams.ctx documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Kafka</span> <span class="project-version">1.0.0-beta1</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>dvlopt</span></div></div></li><li class="depth-2"><a href="dvlopt.kafka.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>kafka</span></div></a></li><li class="depth-3 branch"><a href="dvlopt.kafka.admin.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>admin</span></div></a></li><li class="depth-3 branch"><a href="dvlopt.kafka.in.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>in</span></div></a></li><li class="depth-3"><a href="dvlopt.kafka.out.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>out</span></div></a></li><li class="depth-2"><a href="dvlopt.kstreams.html"><div class="inner"><span class="tree" style="top: -114px;"><span class="top" style="height: 123px;"></span><span class="bottom"></span></span><span>kstreams</span></div></a></li><li class="depth-3 branch"><a href="dvlopt.kstreams.builder.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>builder</span></div></a></li><li class="depth-3 branch current"><a href="dvlopt.kstreams.ctx.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>ctx</span></div></a></li><li class="depth-3 branch"><a href="dvlopt.kstreams.store.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>store</span></div></a></li><li class="depth-3 branch"><a href="dvlopt.kstreams.stream.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>stream</span></div></a></li><li class="depth-3 branch"><a href="dvlopt.kstreams.table.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>table</span></div></a></li><li class="depth-3"><a href="dvlopt.kstreams.topology.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>topology</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="dvlopt.kstreams.ctx.html#var-commit"><div class="inner"><span>commit</span></div></a></li><li class="depth-1"><a href="dvlopt.kstreams.ctx.html#var-forward"><div class="inner"><span>forward</span></div></a></li><li class="depth-1"><a href="dvlopt.kstreams.ctx.html#var-kv-store"><div class="inner"><span>kv-store</span></div></a></li><li class="depth-1"><a href="dvlopt.kstreams.ctx.html#var-schedule"><div class="inner"><span>schedule</span></div></a></li><li class="depth-1"><a href="dvlopt.kstreams.ctx.html#var-session-store"><div class="inner"><span>session-store</span></div></a></li><li class="depth-1"><a href="dvlopt.kstreams.ctx.html#var-window-store"><div class="inner"><span>window-store</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">dvlopt.kstreams.ctx</h1><div class="doc"><pre class="plaintext">Contexts are needed for low-level processors.
</pre></div><div class="public anchor" id="var-commit"><h3>commit</h3><div class="usage"><code>(commit ctx)</code></div><div class="doc"><pre class="plaintext">Manually requests a commit of the current state.

Commits are handle automatically by the library. This function request the next commit to happen as soon
as possible.</pre></div></div><div class="public anchor" id="var-forward"><h3>forward</h3><div class="usage"><code>(forward ctx options)</code></div><div class="doc"><pre class="plaintext">Forwards a key-value to child nodes during processing.

A map of options may be given :

  :dvlopt.kafka/key
   Unserialized key.

  :dvlopt.kafka/timestamp
   Chosen timestamp.
   If missing, selects the timestamp of the record being processed.

  :dvlopt.kafka/value
   Unserialized value.

  :dvlopt.streams/child
   Name of a specific child node.
   If missing, forwards to all children.</pre></div></div><div class="public anchor" id="var-kv-store"><h3>kv-store</h3><div class="usage"><code>(kv-store ctx store-name)</code></div><div class="doc"><pre class="plaintext">Retrieves a writable key-value store.

Cf. `dvlopt.kstreams.store`</pre></div></div><div class="public anchor" id="var-schedule"><h3>schedule</h3><div class="usage"><code>(schedule ctx interval time-type callback)</code></div><div class="doc"><pre class="plaintext">Schedules a periodic operation for processors (may be used during :dvlopt.kstreams/processor.init and/or
:dvlopt.kstreams/processor.on-record).

The time interval must be as described in `dvlopt.kafka` (best effort for millisecond precision).

The time type is either :

  :stream-time
   Time advances following timestamps extracted from records.
   An operation is skipped if stream time advances more than the interval.

  :wall-clock-time
   Times advances following system time (best effort).
   An operation is skipped if garbage-collection halts the world for too long or if the current operation
   takes more time to complete than the interval.

The callback accepts only 1 argument, the timestamp of "when" it is called (depending on time type).


Returns a no-op function for cancelling the operation.


Ex. (schedule ctx
              [5 :seconds]
              :stream-time
              (fn callback [timestamp]
                (do-stuff-like-forwarding-records ...)))</pre></div></div><div class="public anchor" id="var-session-store"><h3>session-store</h3><div class="usage"><code>(session-store ctx store-name)</code></div><div class="doc"><pre class="plaintext">Retrieves a writable session store.

Cf. `dvlopt.kstreams.store`</pre></div></div><div class="public anchor" id="var-window-store"><h3>window-store</h3><div class="usage"><code>(window-store ctx store-name)</code></div><div class="doc"><pre class="plaintext">Retrieves a writable window store.

Cf. `dvlopt.kstreams.store`</pre></div></div></div></body></html>