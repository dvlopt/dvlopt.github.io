<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>dvlopt.kafka documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Kafka</span> <span class="project-version">1.0.0-beta1</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>dvlopt</span></div></div></li><li class="depth-2 current"><a href="dvlopt.kafka.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>kafka</span></div></a></li><li class="depth-3 branch"><a href="dvlopt.kafka.admin.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>admin</span></div></a></li><li class="depth-3 branch"><a href="dvlopt.kafka.in.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>in</span></div></a></li><li class="depth-3"><a href="dvlopt.kafka.out.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>out</span></div></a></li><li class="depth-2"><a href="dvlopt.kstreams.html"><div class="inner"><span class="tree" style="top: -114px;"><span class="top" style="height: 123px;"></span><span class="bottom"></span></span><span>kstreams</span></div></a></li><li class="depth-3 branch"><a href="dvlopt.kstreams.builder.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>builder</span></div></a></li><li class="depth-3 branch"><a href="dvlopt.kstreams.ctx.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>ctx</span></div></a></li><li class="depth-3 branch"><a href="dvlopt.kstreams.store.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>store</span></div></a></li><li class="depth-3 branch"><a href="dvlopt.kstreams.stream.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>stream</span></div></a></li><li class="depth-3 branch"><a href="dvlopt.kstreams.table.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>table</span></div></a></li><li class="depth-3"><a href="dvlopt.kstreams.topology.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>topology</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="dvlopt.kafka.html#var-defaults"><div class="inner"><span>defaults</span></div></a></li><li class="depth-1"><a href="dvlopt.kafka.html#var-deserializers"><div class="inner"><span>deserializers</span></div></a></li><li class="depth-1"><a href="dvlopt.kafka.html#var-serializers"><div class="inner"><span>serializers</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">dvlopt.kafka</h1><div class="doc"><pre class="plaintext">Start here.

This library aims to be clojure idiomatic while not being too smart about wrapping the java libraries, so that upgrading
will not be laborious in the future.

It is organized by specific namespaces. Producers (dvlopt.kafka.out) produce records, consumers (dvlopt.kafka.in)
consume records, and administrators can alter Kafka (dvlopt.kafka.admin). For anything related to Kafka Streams, see the
`dvlopt.kstreams` namespace.


Records
=======

A record is a map containing at least a ::topic. It might also hold :

  ::headers
  ::offset
  ::key
  ::timestamp
  ::value

Obviously, the offset cannot be decided by the user when sending the record. Headers allow records to have metadata
clearly distinct from the value. They exerce the same role as in other protocols such as HTTP. They consist of a list
of key-values where the order might be important. Keys are arbitrary strings and can appear more than once. Values are
arbitrary byte arrays or may be missing.


Connecting to nodes
===================

Opening a resource such as a producer requires a list of nodes (ie. list of [host port]). If not provided, the library
tries to reach [["localhost" 9092]]. When described, a node is a map containing ::host, ::port, ::id (numerical
identification), and ::rack when one is assigned. A replica node also contains the attribute ::synced?.


Ser/de
======

Within Kafka, records are kept as transparent byte arrays. When sending records, the key and the value need to be
serialized and when consuming some, deserialized. 

A serializer is a function mapping some data to a byte array or nil. It is needed for producing records.

Ex. (fn serializer [data metadata]
      (some-&gt; v
              nippy/freeze))

A deserializer does the opposite, it maps a byte array (or nil) to a value. It is needed for consuming records.

Ex. (fn deserializer [ba metadata]
      (some-&gt; ba
              nippy/thaw))


Both type of functions are often used throughout the library. The provided metadata might help the user to decide on
how to ser/de the data. It is a map containing the ::topic involved as well as ::headers when there are some.

Built-in deserializers and serializers are available at `deserializers` and  `serializers` respectively. Because ser/de
is so common, a key word specifying one of the built-in functions can be provided :

  :boolean
  :byte-array
  :byte-buffer
  :double
  :integer
  :long
  :string

If a ser/de is not provided by the user when needed, the default is :byte-array.


Time
====

All time intervals such as timeouts, throughout all this library, are expressed as [Duration Unit] where
Duration is coerced to an integer and Unit is one of :

  :nanoseconds
  :microseconds
  :milliseconds
  :seconds
  :minutes
  :hours
  :days

Ex. [5 :seconds]</pre></div><div class="public anchor" id="var-defaults"><h3>defaults</h3><div class="usage"></div><div class="doc"><pre class="plaintext">Default values and options used throughout this library.
</pre></div></div><div class="public anchor" id="var-deserializers"><h3>deserializers</h3><div class="usage"></div><div class="doc"><pre class="plaintext">Built-in deserializers.
</pre></div></div><div class="public anchor" id="var-serializers"><h3>serializers</h3><div class="usage"></div><div class="doc"><pre class="plaintext">Built-in serializers.
</pre></div></div></div></body></html>