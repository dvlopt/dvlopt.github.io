<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>pi4clj.gpio.emulate documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Pi4clj</span> <span class="project-version">0.0.0-alpha2</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>pi4clj</span></div></div></li><li class="depth-2"><a href="pi4clj.gpio.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>gpio</span></div></a></li><li class="depth-3 current"><a href="pi4clj.gpio.emulate.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>emulate</span></div></a></li><li class="depth-2"><a href="pi4clj.i2c.html"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>i2c</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="pi4clj.gpio.emulate.html#var-pwm-out"><div class="inner"><span>pwm-out</span></div></a></li><li class="depth-1"><a href="pi4clj.gpio.emulate.html#var-stop"><div class="inner"><span>stop</span></div></a></li><li class="depth-1"><a href="pi4clj.gpio.emulate.html#var-tone-out"><div class="inner"><span>tone-out</span></div></a></li><li class="depth-1"><a href="pi4clj.gpio.emulate.html#var-wr-pwm"><div class="inner"><span>wr-pwm</span></div></a></li><li class="depth-1"><a href="pi4clj.gpio.emulate.html#var-wr-soft-tone"><div class="inner"><span>wr-soft-tone</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">pi4clj.gpio.emulate</h1><div class="doc"><pre class="plaintext">Everything related to software emulated GPIO.

Typically, uses some form of bit banging on a reserved thread.</pre></div><div class="public anchor" id="var-pwm-out"><h3>pwm-out</h3><div class="usage"><code>(pwm-out pin &amp; [{:as config, :keys [range value], :or {range 100, value 0}}])</code></div><div class="doc"><pre class="plaintext">Declare the given pin as software emulated pwm output in
mark:space mode.

Unlike hardware pwm outputs, the range can be
different for each pin. The default and recommended
range is 100.

The frequency is a function of the pulse width and
the range :

    recommended range x pulse width = period

    100 x 100µs = 10 000µs  =&gt;  100Hz

Thus, for a higher frequency at the expense of resolution,
decrease range.

&lt;!&gt; Uses 1 thread per emulated pin.

Cf. pi4clj.gpio/config-pwm


;; pin 3 with a value of 50 and a default range of 100
(pi4clj.gpio/pwm-out 3 {:value 50})</pre></div><div class="src-link"><a href="https://github.com/dvlopt/pi4clj/blob/0.0.0-alpha2/src/pi4clj/gpio/emulate.clj#L33">view source</a></div></div><div class="public anchor" id="var-stop"><h3>stop</h3><div class="usage"><code>(stop pin)</code></div><div class="doc"><pre class="plaintext">Stop emulating a pin by killing the related thread.

Cf. pwm-out
    tone-out</pre></div><div class="src-link"><a href="https://github.com/dvlopt/pi4clj/blob/0.0.0-alpha2/src/pi4clj/gpio/emulate.clj#L121">view source</a></div></div><div class="public anchor" id="var-tone-out"><h3>tone-out</h3><div class="usage"><code>(tone-out pin &amp; [frequency])</code></div><div class="doc"><pre class="plaintext">Declare the given pin as a software emulated tone output.

For efficiency reasons, the pulse width is 100µs.
Hence the maximum frequence is :

    1 / 0.0002 = 5KHz


&lt;!&gt; Uses 1 thread per emulated pin.


;; pin 3 with a frequency of 5 Hertz
(pi4clj.gpio.emulated/tone-out 3 5)</pre></div><div class="src-link"><a href="https://github.com/dvlopt/pi4clj/blob/0.0.0-alpha2/src/pi4clj/gpio/emulate.clj#L91">view source</a></div></div><div class="public anchor" id="var-wr-pwm"><h3>wr-pwm</h3><div class="usage"><code>(wr-pwm pin value)</code></div><div class="doc"><pre class="plaintext">Write an int to a software emulated pwm output.
Within the limits of the declared range.

Cf. pwm-out</pre></div><div class="src-link"><a href="https://github.com/dvlopt/pi4clj/blob/0.0.0-alpha2/src/pi4clj/gpio/emulate.clj#L17">view source</a></div></div><div class="public anchor" id="var-wr-soft-tone"><h3>wr-soft-tone</h3><div class="usage"><code>(wr-soft-tone pin frequency)</code></div><div class="doc"><pre class="plaintext">Set the frequency in Hertz of the given software tone pin.

Maximum is 5000.</pre></div><div class="src-link"><a href="https://github.com/dvlopt/pi4clj/blob/0.0.0-alpha2/src/pi4clj/gpio/emulate.clj#L76">view source</a></div></div></div></body></html>