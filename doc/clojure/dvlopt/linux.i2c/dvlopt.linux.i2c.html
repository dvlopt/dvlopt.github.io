<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>dvlopt.linux.i2c documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Linux.i2c</span> <span class="project-version">1.1.0</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>dvlopt</span></div></div></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>linux</span></div></div></li><li class="depth-3 current"><a href="dvlopt.linux.i2c.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>i2c</span></div></a></li><li class="depth-4"><a href="dvlopt.linux.i2c.smbus.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>smbus</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="dvlopt.linux.i2c.html#var-bus"><div class="inner"><span>bus</span></div></a></li><li class="depth-1"><a href="dvlopt.linux.i2c.html#var-capabilities"><div class="inner"><span>capabilities</span></div></a></li><li class="depth-1"><a href="dvlopt.linux.i2c.html#var-close"><div class="inner"><span>close</span></div></a></li><li class="depth-1"><a href="dvlopt.linux.i2c.html#var-defaults"><div class="inner"><span>defaults</span></div></a></li><li class="depth-1"><a href="dvlopt.linux.i2c.html#var-read"><div class="inner"><span>read</span></div></a></li><li class="depth-1"><a href="dvlopt.linux.i2c.html#var-select-slave"><div class="inner"><span>select-slave</span></div></a></li><li class="depth-1"><a href="dvlopt.linux.i2c.html#var-set-retries"><div class="inner"><span>set-retries</span></div></a></li><li class="depth-1"><a href="dvlopt.linux.i2c.html#var-set-timeout"><div class="inner"><span>set-timeout</span></div></a></li><li class="depth-1"><a href="dvlopt.linux.i2c.html#var-transaction"><div class="inner"><span>transaction</span></div></a></li><li class="depth-1"><a href="dvlopt.linux.i2c.html#var-write"><div class="inner"><span>write</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">dvlopt.linux.i2c</h1><div class="doc"><pre class="plaintext">The Linux kernel provides a standard interface for performing I2C operations.

This library exposes this interface in a clojure idiomatic way.

Each IO operation might throw if something fails.

Essentially, IO can be performed by directly reading and writing arbitrary bytes, doing
transactions (uninterrupted sequence of messages) and using standard SMBus operations.

Not everything is supported by your driver, refer to `capabilities`. Furthermore, slave devices
are often buggy and imperfect.</pre></div><div class="public anchor" id="var-bus"><h3>bus</h3><div class="usage"><code>(bus bus-path)</code></div><div class="doc"><pre class="plaintext">Opens an I2C bus by providing the number of the bus or a direct path.


Ex. (bus "/dev/i2c-1")</pre></div></div><div class="public anchor" id="var-capabilities"><h3>capabilities</h3><div class="usage"><code>(capabilities bus)</code></div><div class="doc"><pre class="plaintext">Retrieves the capabilities of the given bus.

Not every driver is capable of doing everything this library offers, specially when it comes to SMBus operations.

Even then, support can be unperfect. For instance, sometimes transactions are supported but fail when they contain
more than 1 message, which makes them quite useless.

Furthermore, a lot also depends on the slave device.

Functions from this library document what need to be checked.</pre></div></div><div class="public anchor" id="var-close"><h3>close</h3><div class="usage"><code>(close bus)</code></div><div class="doc"><pre class="plaintext">Closes an I2C bus.
</pre></div></div><div class="public anchor" id="var-defaults"><h3>defaults</h3><div class="usage"></div><div class="doc"><pre class="plaintext">Defaults values for options used throughout this library.
</pre></div></div><div class="public anchor" id="var-read"><h3>read</h3><div class="usage"><code>(read bus length)</code></div><div class="doc"><pre class="plaintext">Reads an arbitrary amount of bytes.
</pre></div></div><div class="public anchor" id="var-select-slave"><h3>select-slave</h3><div class="usage"><code>(select-slave bus slave-address)</code><code>(select-slave bus slave-address slave-options)</code></div><div class="doc"><pre class="plaintext">Selects an I2C slave device.

Affects every IO operations besides transactions where the slave address is given for each message.

Cf. `capabilities` for :10-bit-addressing.


Ex. (select-slave some-bus
                  0x42
                  {::10-bit? false
                   ::force?  false})</pre></div></div><div class="public anchor" id="var-set-retries"><h3>set-retries</h3><div class="usage"><code>(set-retries bus retries)</code></div><div class="doc"><pre class="plaintext">Sets the number of retries when communication fails.

Does not always produce an effect depending on the underlying driver.</pre></div></div><div class="public anchor" id="var-set-timeout"><h3>set-timeout</h3><div class="usage"><code>(set-timeout bus timeout-ms)</code></div><div class="doc"><pre class="plaintext">Sets the timeout in milliseconds for slave responses.

Does not always produce an effect depending on the underlying driver.</pre></div></div><div class="public anchor" id="var-transaction"><h3>transaction</h3><div class="usage"><code>(transaction bus messages)</code></div><div class="doc"><pre class="plaintext">A transaction represents a sequence of messages, reads and writes, meant to be carried out without interruption.

Not every device supports this feature, or sometimes only supports 1 message per transaction with defeats their purpose.

Each message specifies if it is a read or a write and consists of options :

  ::10-bit?         Should the 10-bit addressing mode be used ?
  ::ignore-nak?     Should "not-acknowledge" be ignored ?
  ::no-read-ack?    Should read-acks be ignored ?
  ::no-start?       Should not issue any more START/address after the initial one.
  ::revise-wr-bit?  Should send a read flag for writes and vice-versa (for broken slave) ?
  ::slave-address   Which slave.
  ::tag             Any value associated with the message, important for reads (the number of the message
                    by default).

After the transaction is carried out, a map of tag -&gt; bytes is returned for reads.

Cf. `capabilities` for :10-bit-addressing as well as other booleans flags under the :protocol-mangling capability.


Ex. (transaction some-bus
                 [{::slave-address 0x42
                   ::write         [24 1 2 3]}
                  {::slave-address 0x42
                   ::read          3
                   ::tag           :my-read}])

    =&gt; {:my-read [...]}</pre></div></div><div class="public anchor" id="var-write"><h3>write</h3><div class="usage"><code>(write bus bs)</code></div><div class="doc"><pre class="plaintext">Writes a sequence of bytes.
</pre></div></div></div></body></html>