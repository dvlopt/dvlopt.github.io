<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>pi4clj.i2c documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Pi4clj</span> <span class="project-version">0.0.0-alpha2</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>pi4clj</span></div></div></li><li class="depth-2"><a href="pi4clj.gpio.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>gpio</span></div></a></li><li class="depth-3"><a href="pi4clj.gpio.emulate.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>emulate</span></div></a></li><li class="depth-2 current"><a href="pi4clj.i2c.html"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>i2c</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="pi4clj.i2c.html#var-close-bus"><div class="inner"><span>close-bus</span></div></a></li><li class="depth-1"><a href="pi4clj.i2c.html#var-open-bus"><div class="inner"><span>open-bus</span></div></a></li><li class="depth-1"><a href="pi4clj.i2c.html#var-rd"><div class="inner"><span>rd</span></div></a></li><li class="depth-1"><a href="pi4clj.i2c.html#var-rd-reg"><div class="inner"><span>rd-reg</span></div></a></li><li class="depth-1"><a href="pi4clj.i2c.html#var-wr"><div class="inner"><span>wr</span></div></a></li><li class="depth-1"><a href="pi4clj.i2c.html#var-wr.2B"><div class="inner"><span>wr+</span></div></a></li><li class="depth-1"><a href="pi4clj.i2c.html#var-wr-reg"><div class="inner"><span>wr-reg</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">pi4clj.i2c</h1><div class="doc"><pre class="plaintext">Everything related to I2C.

Open a bus and simply use the fns.

&lt;!&gt; Reads and writes are NOT thread-safe !
    Concurrency can be achieved through agents, core.async,
    manifold... Use what you need.</pre></div><div class="public anchor" id="var-close-bus"><h3>close-bus</h3><div class="usage"><code>(close-bus {:keys [fd], :as bus})</code></div><div class="doc"><pre class="plaintext">Cleanly close an I2C bus previously opened by
'pi4clj.i2c/open-bus'.

Should be called when you are done with it.

Returns true or false whether it suceeded or not.</pre></div><div class="src-link"><a href="https://github.com/dvlopt/pi4clj/blob/0.0.0-alpha2/src/pi4clj/i2c.clj#L68">view source</a></div></div><div class="public anchor" id="var-open-bus"><h3>open-bus</h3><div class="usage"><code>(open-bus bus-path)</code></div><div class="doc"><pre class="plaintext">Given a path, open a I2C bus. This bus can then be
used in the fns provided by this namespace.

Returns nil in case of failure.

&lt;!&gt; Reads and writes are NOT thread-safe !
    Concurrency can be achieved through agents, core.async,
    manifold... Use whatever you need.

ex.
  (pi4clj.i2c/open-bus "/dev/i2c-1")</pre></div><div class="src-link"><a href="https://github.com/dvlopt/pi4clj/blob/0.0.0-alpha2/src/pi4clj/i2c.clj#L44">view source</a></div></div><div class="public anchor" id="var-rd"><h3>rd</h3><div class="usage"><code>(rd {:keys [fd], :as bus} slave-address)</code><code>(rd {:keys [fd], :as bus} slave-address n)</code></div><div class="doc"><pre class="plaintext">Given an I2C bus, read 1 or 'n' bytes from a slave
adress provided as an int</pre></div><div class="src-link"><a href="https://github.com/dvlopt/pi4clj/blob/0.0.0-alpha2/src/pi4clj/i2c.clj#L170">view source</a></div></div><div class="public anchor" id="var-rd-reg"><h3>rd-reg</h3><div class="usage"><code>(rd-reg {:keys [fd], :as bus} slave-address register)</code><code>(rd-reg {:keys [fd], :as bus} slave-address register n)</code></div><div class="doc"><pre class="plaintext">Same as 'pi4clj.i2c/rd' but reads from a specific register provided
as an int</pre></div><div class="src-link"><a href="https://github.com/dvlopt/pi4clj/blob/0.0.0-alpha2/src/pi4clj/i2c.clj#L200">view source</a></div></div><div class="public anchor" id="var-wr"><h3>wr</h3><div class="usage"><code>(wr {:keys [fd], :as bus} slave-address byte+)</code></div><div class="doc"><pre class="plaintext">Given an I2C bus, write something.

slave-address : an int representing a slave
byte+ : an int representing a single byte
      | a collection of them

Returns what has been written, nil in case of failure.</pre></div><div class="src-link"><a href="https://github.com/dvlopt/pi4clj/blob/0.0.0-alpha2/src/pi4clj/i2c.clj#L85">view source</a></div></div><div class="public anchor" id="var-wr.2B"><h3>wr+</h3><div class="usage"><code>(wr+ bus slave-address coll-byte+)</code></div><div class="doc"><pre class="plaintext">Sometimes, multiple writes have to been done sequentially and
not at once, for instance when configuring certains slaves.

This fn calls 'pi4clj.i2c/wr' for every element in coll-byte+,
one at a time, and returns a collection of what has been successfully
writen.</pre></div><div class="src-link"><a href="https://github.com/dvlopt/pi4clj/blob/0.0.0-alpha2/src/pi4clj/i2c.clj#L138">view source</a></div></div><div class="public anchor" id="var-wr-reg"><h3>wr-reg</h3><div class="usage"><code>(wr-reg {:keys [fd], :as bus} slave-address register byte+)</code></div><div class="doc"><pre class="plaintext">Same as 'pi4clj.i2c/wr' but writes to a specific register provided
as an int</pre></div><div class="src-link"><a href="https://github.com/dvlopt/pi4clj/blob/0.0.0-alpha2/src/pi4clj/i2c.clj#L113">view source</a></div></div></div></body></html>